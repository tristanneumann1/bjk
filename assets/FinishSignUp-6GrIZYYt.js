import{j as r,u as d,w as m,x as p}from"./firebase-BQlmfc3h.js";import{L as t}from"./index-I5BsexQJ.js";import{d as f,r as l,g as h,h as _,o as w,j as c,t as k,G as v}from"./vendor-vue-Csxe932_.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"finish-shell"},E={id:"status-message",class:"finish-shell__status"},L=f({__name:"FinishSignUp",setup(y){const i=l("Checking link…"),a=l(""),u=v(),g=async()=>{const s=r(),e=(window.localStorage.getItem(t)||"").trim();if(!e){i.value="Failed to finish signing in. Please request a new link and try again.";return}try{i.value="Verifying sign-in link…";const n=await m(s,e,a.value||window.location.href);window.localStorage.removeItem(t);const o=p(n);console.log("Firebase sign-in complete",{user:n.user,providerId:o?.providerId,isNewUser:o?.isNewUser,profile:o?.profile}),i.value=`Welcome back${o?.profile?", profile info logged in console.":"!"} Signed in as ${n.user.email??e}.`,await u.push("/")}catch(n){console.error("Failed to finish email link sign-in",n),i.value="Failed to finish signing in. Please request a new link and try again."}};return h(()=>{const s=r(),e=window.location.href;if(a.value=e,!d(s,e)){i.value="Invalid or expired sign-in link. Request a new one from the app.";return}if(window.localStorage.getItem(t)){g();return}}),(s,e)=>(w(),_("main",S,[e[0]||(e[0]=c("h1",null,"Completing Sign In…",-1)),c("p",E,k(i.value),1)]))}}),C=I(L,[["__scopeId","data-v-4339c149"]]);export{C as default};
