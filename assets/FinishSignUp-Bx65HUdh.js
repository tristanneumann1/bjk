import{j as r,u as d,w as u,x as m}from"./firebase-BQlmfc3h.js";import{L as t}from"./index-Cet1SSQy.js";import{d as p,r as l,g as f,h,o as _,j as c,t as w}from"./vendor-vue-D8izISUP.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";const v={class:"finish-shell"},I={id:"status-message",class:"finish-shell__status"},S=p({__name:"FinishSignUp",setup(E){const i=l("Checking link…"),a=l(""),g=async()=>{const s=r(),e=(window.localStorage.getItem(t)||"").trim();if(!e){i.value="Failed to finish signing in. Please request a new link and try again.";return}try{i.value="Verifying sign-in link…";const n=await u(s,e,a.value||window.location.href);window.localStorage.removeItem(t);const o=m(n);console.log("Firebase sign-in complete",{user:n.user,providerId:o?.providerId,isNewUser:o?.isNewUser,profile:o?.profile}),i.value=`Welcome back${o?.profile?", profile info logged in console.":"!"} Signed in as ${n.user.email??e}.`}catch(n){console.error("Failed to finish email link sign-in",n),i.value="Failed to finish signing in. Please request a new link and try again."}};return f(()=>{const s=r(),e=window.location.href;if(a.value=e,!d(s,e)){i.value="Invalid or expired sign-in link. Request a new one from the app.";return}if(window.localStorage.getItem(t)){g();return}}),(s,e)=>(_(),h("main",v,[e[0]||(e[0]=c("h1",null,"Completing Sign In…",-1)),c("p",I,w(i.value),1)]))}}),x=k(S,[["__scopeId","data-v-ce4d425a"]]);export{x as default};
