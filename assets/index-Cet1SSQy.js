const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeView-CbXRGhRy.js","assets/vendor-vue-D8izISUP.js","assets/firebase-BQlmfc3h.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/HomeView-ChuRd1iX.css","assets/FinishSignUp-Bx65HUdh.js","assets/FinishSignUp-BIpBvxIS.css"])))=>i.map(i=>d[i]);
import{d as ut,c as dt,o as ht,u as ft,R as pt,a as gt,b as mt,e as bt,f as yt}from"./vendor-vue-D8izISUP.js";import{r as M,_ as H,C as $,a as V,E as $e,o as wt,F as Be,L as It,g as ae,i as Ct,b as vt,v as At,c as pe,d as Tt,e as St,f as kt,h as Et}from"./firebase-BQlmfc3h.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();const _t=ut({__name:"App",setup(t){return(e,n)=>(ht(),dt(ft(pt)))}}),Rt="modulepreload",Pt=function(t){return"/bjk/"+t},ge={},me=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=s?.nonce||s?.getAttribute("nonce");i=l(n.map(c=>{if(c=Pt(c),c in ge)return;ge[c]=!0;const f=c.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const d=document.createElement("link");if(d.rel=f?"stylesheet":Rt,f||(d.as="script"),d.crossOrigin="",d.href=c,o&&d.setAttribute("nonce",o),document.head.appendChild(d),f)return new Promise((ct,lt)=>{d.addEventListener("load",ct),d.addEventListener("error",()=>lt(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})},Dt=gt({history:mt("/bjk/"),routes:[{path:"/",name:"home",component:()=>me(()=>import("./HomeView-CbXRGhRy.js"),__vite__mapDeps([0,1,2,3,4]))},{path:"/finishSignUp",name:"finish-sign-up",component:()=>me(()=>import("./FinishSignUp-Bx65HUdh.js"),__vite__mapDeps([5,2,1,3,6]))}]});function Ot(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map(function(i){i(n)}),(r=t.get("*"))&&r.slice().map(function(i){i(e,n)})}}}const I="model:change",xt=(t,e)=>`mod_${t}:prop_${e}`,A=(t,e)=>`mod_${t}:evt_${e}`,Nt=(t,e)=>`mod_${t}#id_${e}`,Mt=(t,e,n)=>`mod_${t}:prop_${e}#id_${n}`,x=(t,e,n)=>`mod_${t}:evt_${e}#id_${n}`,Er=t=>`usr_evt_${t}`,_r=(t,e)=>`usr_evt_${t}_act_${e}`,h=Ot();class Ht{constructor(){this.deckCount=6,this.dealerHitsSoft17=!0,this.doubleAllowedAfterSplit=!0,this.resplitAcesAllowed=!0,this.surrenderAllowed=!0,this.maxSplits=2,this.blackjackPayout=1.5,this.penetration=52,this.dealerPeekA10=!0}}class $t{constructor(e,n){this.suit=e,this.rank=n}isAce(){return this.rank==="A"}get value(){switch(this.rank){case"10":case"J":case"Q":case"K":return 10;case"A":return 1;default:return Number(this.rank)}}get suitSymbol(){switch(this.suit){case"Hearts":return"♥";case"Diamonds":return"♦";case"Clubs":return"♣";case"Spades":return"♠"}}}function Bt(){const t=["Hearts","Diamonds","Clubs","Spades"],e=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],n=[];for(const r of t)for(const i of e)n.push(new $t(r,i));return n}function Lt(t){let e=[];for(let n=0;n<t;n++)e=e.concat(Bt());return e}const be=new WeakMap,ye=new WeakMap,ee=new WeakMap,N=t=>ee.get(t);function se(t,e,n){let r=ee.get(n);if(r)return r;const i=(ye.get(t)??0)+1;return ye.set(t,i),r=`${e}_${i}`,ee.set(n,r),r}const jt=(t,e)=>{let n=be.get(t);n||(n=new Map,be.set(t,n));let r=n.get(e);return r||(r=Symbol(`${String(e)}`),n.set(e,r)),r};function q(t,e){const{model:n,props:r,trackInstance:i=!1}=e,a=t.prototype;r.forEach(s=>{const o=Object.getOwnPropertyDescriptor(a,s);if(o&&!o.configurable)return;const l=jt(a,s);Object.defineProperty(a,s,{configurable:!0,enumerable:!0,get(){return this[l]},set(c){const f=this[l],p=i?se(t,n,this):void 0;this[l]=c;const d={model:n,instanceId:p,property:s,value:c,previous:f,target:this};h.emit(I,d),h.emit(xt(n,s),d),p&&(h.emit(Nt(n,p),d),h.emit(Mt(n,s,p),d))}})})}function Rr(t){return["Hit","Stand","Double","Split","Surrender"].includes(t)}const G="new_card",z="split_cards",K="hand_outcome";class B{constructor(e=[]){this.cards=e,this.isSplit=!1,this.isDoubled=!1,this.hasStood=!1,this.isSurrendered=!1,this.lastOutcome=null,se(B,"hand",this)}get softValue(){let e=0;for(const n of this.cards)e+=n.value;return e}get isSoft(){return this.cards.some(e=>e.isAce())&&this.softValue+10<=21}get isDone(){return this.isBusted||this.hasStood||this.isSurrendered||this.bestValue===21}get isBusted(){return this.softValue>21}get isBlackJack(){return!this.isSplit&&this.bestValue===21&&this.cards.length===2}get bestValue(){return this.isSoft&&this.softValue+10<=21?this.softValue+10:this.softValue}addCard(e){this.cards.push(e);const n=N(this),r={model:"hand",instanceId:n,event:G,value:e,previous:void 0,target:this};h.emit(I,r),h.emit(A("hand",G),r),n&&h.emit(x("hand",G,n),r)}splitCards(){const e=this.cards.pop(),n=N(this),r={model:"hand",instanceId:n,event:z,value:e,previous:void 0,target:this};return h.emit(I,r),h.emit(A("hand",z),r),n&&h.emit(x("hand",z,n),r),e}split(){this.isSplit=!0}emitOutcomeChange(e,n){const r=N(this),i={model:"hand",instanceId:r,event:K,value:e,previous:n,target:this};h.emit(I,i),h.emit(A("hand",K),i),r&&h.emit(x("hand",K,r),i)}setOutcome(e){if(this.lastOutcome===e)return;const n=this.lastOutcome;this.lastOutcome=e,this.emitOutcomeChange(e,n)}beatsHand(e){let n;return this.isSurrendered?n="Surrendered":this.isBlackJack&&!e.isBlackJack?n="BlackJack_Win":!this.isBlackJack&&e.isBlackJack?n="Lose":this.isBusted?n=this.isDoubled?"Double_Lose":"Lose":e.isBusted?n=this.isDoubled?"Double_Win":"Win":this.bestValue>e.bestValue?n=this.isDoubled?"Double_Win":"Win":this.bestValue<e.bestValue?n=this.isDoubled?"Double_Lose":"Lose":n=this.isDoubled?"Double_Push":"Push",this.setOutcome(n),n}}function Pr(t){return typeof t=="number"&&Number.isFinite(t)}function we(t){return t<0?Math.ceil(t):Math.floor(t)}const Ft={logAfterAction:!1},O="chair";class Le{constructor(e,n,r={},i=Ft){this.dealer=e,this.dealerChair=n,this.playerChairs=r,this.configuration=i,this.chairIndex=0,this.runningCount=0,this.chairTurnIndex=0}get dealerPeekedBlackjack(){return g.getInstance().rules.dealerPeekA10&&this.dealerChair.hands[0]?.isBlackJack}get upCard(){return this.dealerChair.hands[0].cards[0]}get roundInitialCost(){let e=0;for(const n of this.playerChairArray)e+=n.bet;return e}get playerChairArray(){return Object.values(this.playerChairs).filter(e=>e!==null)}get activeChair(){return this.playerChairArray[this.chairTurnIndex]}get aPlayerHasCards(){return this.playerChairArray.some(e=>e.hands.some(n=>n.cards.length>0))}get playerRoundsComplete(){return this.dealerPeekedBlackjack||!this.playerChairArray.find(e=>!e.chairDone)}get trueCountLower(){const e=Math.floor(2*this.dealer.remainingDecks)/2;return we(this.runningCount/e)}get trueCountUpper(){const e=Math.ceil(2*this.dealer.remainingDecks)/2;return we(this.runningCount/e)}view(){if(this.dealerChair.hands[0]?.cards.length<1||this.playerChairArray[0]?.hands[0]?.cards.length<1)throw new Error("could not find active hands");for(let e of this.playerChairArray)e.view(e===this.activeChair,this.playerRoundsComplete?this.dealerChair.hands[0]:null);if(this.playerRoundsComplete)console.log("Dealer Chair:",this.dealerChair.hands.map(e=>e.cards.map(n=>`${n.rank}${n.suitSymbol}`).join(", ")).join(" | "));else{const e=this.dealerChair.hands[0].cards[0];console.log(`Dealer Chair: ${e.rank}${e.suitSymbol}, [Hidden]`)}}addPlayerChair(e){const n=new R;this.playerChairs[e??this.chairIndex]=n,this.chairIndex++;const r={model:"table",event:O,value:n,previous:void 0,target:this};h.emit(I,r),h.emit(A("table",O),r)}getPlayerChair(e){return this.playerChairs[e]??null}removePlayerChair(e){const n=this.playerChairs[e];if(!n)throw new Error("No chair at this index");this.playerChairs[e]=null;const r={model:"table",event:O,value:null,previous:n,target:this};h.emit(I,r),h.emit(A("table",O),r)}deal(e,n=1){for(let r=0;r<n;r++)e.deal(this.dealer.dealCard())}startRound(){const e=this.validateRoundCanStart();if(e)throw new Error(e);g.getInstance().player.removeMoney(this.roundInitialCost),this.dealerChair.start(),this.deal(this.dealerChair,2);for(let n of this.playerChairArray)n.start(),this.deal(n,2);this.chairTurnIndex=-1,this.dealerPeekedBlackjack&&(this.chairTurnIndex=this.playerChairArray.length),this.nextChair(),this.configuration.logAfterAction&&this.view(),this.dealer.holeCardHidden=!this.playerRoundsComplete,this.updateRunningCount(),this.activeChair||this.payout()}updateRunningCount(){if(this.dealer.holeCardHidden){const e=g.getInstance().table.dealerChair.hands[0]?.cards[1],n=e?P.getCountDelta(e):0;this.runningCount=this.dealer.trueRunningCount-n}else this.runningCount=this.dealer.trueRunningCount}act(e){if(!this.dealerChair.activeHand)throw new Error("Round not started");if(!this.activeChair)throw new Error("No active chair");this.activeChair.act(e,this.dealer),this.activeChair.activeHand===void 0&&this.nextChair(),this.playerRoundsComplete&&this.dealer.completeDealerHand(this.dealerChair.activeHand),this.updateRunningCount(),this.configuration.logAfterAction&&this.view(),this.activeChair||this.payout()}nextChair(){if(this.chairTurnIndex++,this.activeChair&&this.activeChair.chairDone){this.nextChair();return}}payout(){if(this.chairTurnIndex<this.playerChairArray.length)throw new Error("Round still in progress");for(let e of this.playerChairArray){const n=e.payout(this.dealerChair.hands[0]);n>0&&g.getInstance().player.addMoney(n)}this.resetAllChairs(),this.chairTurnIndex=0}resetAllChairs(){this.dealerChair.start();for(let e of this.playerChairArray)e.start()}validateRoundCanStart(){if(this.dealerChair.hands[0]?.cards.length>0)return"Round already in progress";if(this.playerChairArray.length===0)return"No players at the table";if(this.roundInitialCost>g.getInstance().player.balance)return"Player does not have enough balance for the round";if(this.roundInitialCost<=0)return"No bets placed";for(const e of this.playerChairArray)if(e.bet<0)return"No negative bets allowed";for(const e of this.playerChairArray)if(e.bet<=0)return"All chairs must have a bet placed";return this.dealer.pastPenetration()?"Dealer is out of cards, needs to reshuffle":null}}q(Le,{model:"table",props:["chairTurnIndex","runningCount"],trackInstance:!1});class g{static initialize(e){this.instance=e}static getInstance(){if(!g.instance)throw new Error("Session not initialized");return g.instance}constructor({player:e,rules:n,table:r}){this.player=e,this.rules=n,this.table=r}}class P{constructor(e=[]){this.shoe=e,this.dealIndex=0,this.trueRunningCount=0,this.holeCardHidden=!0}static getCountDelta(e){switch(e.value){case 1:case 10:return-1;case 2:case 3:case 4:case 5:case 6:return 1;default:return 0}}get remainingDecks(){return(this.shoe.length-this.dealIndex-1)/52}pastPenetration(){return this.shoe.length-1-this.dealIndex<g.getInstance().rules.penetration+1}reset(){this.shuffle()}resetDealIndex(){this.dealIndex=0}dealCard(){if(this.dealIndex>this.shoe.length-1)throw new Error("No cards left in the shoe");const e=this.shoe[this.dealIndex];return this.dealIndex++,this.applyRunningCountDelta(e),e}shuffle(){for(let e=this.shoe.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[this.shoe[e],this.shoe[n]]=[this.shoe[n],this.shoe[e]]}this.dealIndex=0,this.trueRunningCount=0,this.holeCardHidden=!0}completeDealerHand(e){for(;e.bestValue<17;)e.addCard(this.dealCard());e.bestValue===17&&e.isSoft&&g.getInstance().rules.dealerHitsSoft17&&e.addCard(this.dealCard()),this.holeCardHidden&&(this.holeCardHidden=!1)}applyRunningCountDelta(e){if(!e)return;const n=P.getCountDelta(e);n!==0&&(this.trueRunningCount=this.trueRunningCount+n)}}q(P,{model:"dealer",props:["dealIndex","holeCardHidden"],trackInstance:!1});const J=10,Ie=(t=0)=>e=>`\x1B[${e+t}m`,Ce=(t=0)=>e=>`\x1B[${38+t};5;${e}m`,ve=(t=0)=>(e,n,r)=>`\x1B[${38+t};2;${e};${n};${r}m`,u={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(u.modifier);const Vt=Object.keys(u.color),qt=Object.keys(u.bgColor);[...Vt,...qt];function Ut(){const t=new Map;for(const[e,n]of Object.entries(u)){for(const[r,i]of Object.entries(n))u[r]={open:`\x1B[${i[0]}m`,close:`\x1B[${i[1]}m`},n[r]=u[r],t.set(i[0],i[1]);Object.defineProperty(u,e,{value:n,enumerable:!1})}return Object.defineProperty(u,"codes",{value:t,enumerable:!1}),u.color.close="\x1B[39m",u.bgColor.close="\x1B[49m",u.color.ansi=Ie(),u.color.ansi256=Ce(),u.color.ansi16m=ve(),u.bgColor.ansi=Ie(J),u.bgColor.ansi256=Ce(J),u.bgColor.ansi16m=ve(J),Object.defineProperties(u,{rgbToAnsi256:{value(e,n,r){return e===n&&n===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},enumerable:!1},hexToRgb:{value(e){const n=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!n)return[0,0,0];let[r]=n;r.length===3&&(r=[...r].map(a=>a+a).join(""));const i=Number.parseInt(r,16);return[i>>16&255,i>>8&255,i&255]},enumerable:!1},hexToAnsi256:{value:e=>u.rgbToAnsi256(...u.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value(e){if(e<8)return 30+e;if(e<16)return 90+(e-8);let n,r,i;if(e>=232)n=((e-232)*10+8)/255,r=n,i=n;else{e-=16;const o=e%36;n=Math.floor(e/36)/5,r=Math.floor(o/6)/5,i=o%6/5}const a=Math.max(n,r,i)*2;if(a===0)return 30;let s=30+(Math.round(i)<<2|Math.round(r)<<1|Math.round(n));return a===2&&(s+=60),s},enumerable:!1},rgbToAnsi:{value:(e,n,r)=>u.ansi256ToAnsi(u.rgbToAnsi256(e,n,r)),enumerable:!1},hexToAnsi:{value:e=>u.ansi256ToAnsi(u.hexToAnsi256(e)),enumerable:!1}}),u}const y=Ut(),Ae=(()=>{if(!("navigator"in globalThis))return 0;if(globalThis.navigator.userAgentData){const t=navigator.userAgentData.brands.find(({brand:e})=>e==="Chromium");if(t&&t.version>93)return 3}return/\b(Chrome|Chromium)\//.test(globalThis.navigator.userAgent)?1:0})(),Te=Ae!==0&&{level:Ae},Wt={stdout:Te,stderr:Te};function Gt(t,e,n){let r=t.indexOf(e);if(r===-1)return t;const i=e.length;let a=0,s="";do s+=t.slice(a,r)+e+n,a=r+i,r=t.indexOf(e,a);while(r!==-1);return s+=t.slice(a),s}function zt(t,e,n,r){let i=0,a="";do{const s=t[r-1]==="\r";a+=t.slice(i,s?r-1:r)+e+(s?`\r
`:`
`)+n,i=r+1,r=t.indexOf(`
`,i)}while(r!==-1);return a+=t.slice(i),a}const{stdout:Se,stderr:ke}=Wt,te=Symbol("GENERATOR"),S=Symbol("STYLER"),_=Symbol("IS_EMPTY"),Ee=["ansi","ansi","ansi256","ansi16m"],k=Object.create(null),Kt=(t,e={})=>{if(e.level&&!(Number.isInteger(e.level)&&e.level>=0&&e.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const n=Se?Se.level:0;t.level=e.level===void 0?n:e.level},Jt=t=>{const e=(...n)=>n.join(" ");return Kt(e,t),Object.setPrototypeOf(e,D.prototype),e};function D(t){return Jt(t)}Object.setPrototypeOf(D.prototype,Function.prototype);for(const[t,e]of Object.entries(y))k[t]={get(){const n=L(this,re(e.open,e.close,this[S]),this[_]);return Object.defineProperty(this,t,{value:n}),n}};k.visible={get(){const t=L(this,this[S],!0);return Object.defineProperty(this,"visible",{value:t}),t}};const ne=(t,e,n,...r)=>t==="rgb"?e==="ansi16m"?y[n].ansi16m(...r):e==="ansi256"?y[n].ansi256(y.rgbToAnsi256(...r)):y[n].ansi(y.rgbToAnsi(...r)):t==="hex"?ne("rgb",e,n,...y.hexToRgb(...r)):y[n][t](...r),Yt=["rgb","hex","ansi256"];for(const t of Yt){k[t]={get(){const{level:n}=this;return function(...r){const i=re(ne(t,Ee[n],"color",...r),y.color.close,this[S]);return L(this,i,this[_])}}};const e="bg"+t[0].toUpperCase()+t.slice(1);k[e]={get(){const{level:n}=this;return function(...r){const i=re(ne(t,Ee[n],"bgColor",...r),y.bgColor.close,this[S]);return L(this,i,this[_])}}}}const Qt=Object.defineProperties(()=>{},{...k,level:{enumerable:!0,get(){return this[te].level},set(t){this[te].level=t}}}),re=(t,e,n)=>{let r,i;return n===void 0?(r=t,i=e):(r=n.openAll+t,i=e+n.closeAll),{open:t,close:e,openAll:r,closeAll:i,parent:n}},L=(t,e,n)=>{const r=(...i)=>Xt(r,i.length===1?""+i[0]:i.join(" "));return Object.setPrototypeOf(r,Qt),r[te]=t,r[S]=e,r[_]=n,r},Xt=(t,e)=>{if(t.level<=0||!e)return t[_]?"":e;let n=t[S];if(n===void 0)return e;const{openAll:r,closeAll:i}=n;if(e.includes("\x1B"))for(;n!==void 0;)e=Gt(e,n.close,n.open),n=n.parent;const a=e.indexOf(`
`);return a!==-1&&(e=zt(e,i,r,a)),r+e+i};Object.defineProperties(D.prototype,k);const _e=D();D({level:ke?ke.level:0});const Zt={Win:"blue",Lose:"red",Double_Lose:"red",Surrendered:"red",Push:"white",BlackJack_Win:"bgYellow",Double_Win:"blue",Double_Push:"white"},Y="new_hand",E=class E{constructor(e=[]){this.hands=e,this.bet=0,this.activeHandIndex=0,this.splitCount=0,se(E,"chair",this)}get activeHand(){return this.hands[this.activeHandIndex]}get chairDone(){return!this.activeHand||this.allHandsOff}get allHandsOff(){for(let e of this.hands)if(!e.isBusted&&!e.isSurrendered&&!e.isBlackJack)return!1;return!0}start(){this.hands=[new B],this.activeHandIndex=0,this.splitCount=0}deal(e){if(!this.activeHand)throw new Error("no active hand");this.activeHand.addCard(e)}payout(e){let n=0;for(let r of this.hands)n+=this.handPayout(r,e);return n}handPayout(e,n){switch(e.beatsHand(n)){case"Win":case"Double_Push":return this.bet*2;case"Push":return this.bet;case"BlackJack_Win":return Math.floor(this.bet*(1+g.getInstance().rules.blackjackPayout));case"Lose":case"Double_Lose":return 0;case"Double_Win":return this.bet*4;case"Surrendered":return this.bet/2}}moveToNextHand(e){this.activeHandIndex++,this.activeHand&&this.activeHand.cards.length<2&&this.activeHand.addCard(e.dealCard()),this.activeHand&&this.activeHand.isDone&&this.moveToNextHand(e)}listViableActions(){return E.ACTIONS.reduce((e,n)=>(e[n]=!this.validateAction(n),e),{})}validateAction(e){const n=this.activeHand;if(!n)return"No active hand";if(n.isDone)return"Hand not active";const r=g.getInstance().rules;switch(e){case"Stand":return null;case"Hit":return n.softValue<21?null:"Cannot hit on 21 or more";case"Double":return g.getInstance().player.balance<this.bet?"Not enough balance to double":n.cards.length!==2?"Can only double on first two cards":n.isSplit&&!r.doubleAllowedAfterSplit?"Can not double after split":null;case"Split":return n.cards.length!==2?"Can only split with two cards":n.cards[0].value!==n.cards[1].value?"Can only split matching values":this.splitCount>=r.maxSplits?"maximum split count reached":n.cards[0].isAce()&&n.isSplit&&!r.resplitAcesAllowed?"Can not re-split aces":null;case"Surrender":return n.cards.length!==2?"Can only surrender on first two cards":r.surrenderAllowed?null:"Surrender not allowed";case"Insurance":return"Insurance not supported"}}act(e,n){if(!this.activeHand)throw new Error("No active hand");const r=this.validateAction(e);if(r)throw new Error(r);switch(e){case"Stand":this.activeHand.hasStood=!0,this.moveToNextHand(n);break;case"Double":g.getInstance().player.removeMoney(this.bet),this.activeHand.isDoubled=!0,this.activeHand.addCard(n.dealCard()),this.moveToNextHand(n);break;case"Split":const i=this.activeHand.splitCards();if(!i)throw new Error("No card to split");const a=new B([i]);a.split(),this.activeHand.split(),this.splitCount++,this.addHand(a),this.activeHand.addCard(n.dealCard()),this.activeHand.isDone&&this.moveToNextHand(n);break;case"Hit":this.activeHand.addCard(n.dealCard()),this.activeHand.isDone&&this.moveToNextHand(n);break;case"Surrender":this.activeHand.isSurrendered=!0,this.moveToNextHand(n);break}}addHand(e){this.hands.push(e);const n=N(this),r={model:"chair",instanceId:n,event:Y,value:e,previous:void 0,target:this};h.emit(I,r),h.emit(A("hand",Y),r),n&&h.emit(x("chair",Y,n),r)}view(e,n){console.log("Player Chair:",this.hands.map((r,i)=>{const a=n?r.beatsHand(n):null,s=this.chalkModify(r,a);return e&&i===this.activeHandIndex?`>${s}<`:s}).join(" | "),"  Bet:",this.bet)}chalkModify(e,n){let r=e.cards.map(i=>`${i.rank}${i.suitSymbol}`).join(", ");if(n){const i=Zt[n];r=_e[i](r)}return(e.isDoubled||n=="BlackJack_Win")&&(r=_e.underline(r)),r}};E.ACTIONS=["Hit","Stand","Split","Double","Surrender"];let R=E;q(R,{model:"chair",props:["bet","activeHandIndex"],trackInstance:!0});class je{constructor(e){this.balance=e}addMoney(e){this.balance+=e}removeMoney(e){this.balance-=e}}q(je,{model:"player",props:["balance"],trackInstance:!1});function en(){const t=new Ht,e=Lt(t.deckCount),n=new R,r=new P(e);r.shuffle(),r.resetDealIndex();const i=new Le(r,n,[],{logAfterAction:!1});return g.initialize({player:new je(1e5),rules:t,table:i}),g.getInstance()}const Fe="@firebase/installations",oe="0.6.19";const Ve=1e4,qe=`w:${oe}`,Ue="FIS_v2",tn="https://firebaseinstallations.googleapis.com/v1",nn=3600*1e3,rn="installations",an="Installations";const sn={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},C=new $e(rn,an,sn);function We(t){return t instanceof Be&&t.code.includes("request-failed")}function Ge({projectId:t}){return`${tn}/projects/${t}/installations`}function ze(t){return{token:t.token,requestStatus:2,expiresIn:cn(t.expiresIn),creationTime:Date.now()}}async function Ke(t,e){const r=(await e.json()).error;return C.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Je({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function on(t,{refreshToken:e}){const n=Je(t);return n.append("Authorization",ln(e)),n}async function Ye(t){const e=await t();return e.status>=500&&e.status<600?t():e}function cn(t){return Number(t.replace("s","000"))}function ln(t){return`${Ue} ${t}`}async function un({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Ge(t),i=Je(t),a=e.getImmediate({optional:!0});if(a){const c=await a.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const s={fid:n,authVersion:Ue,appId:t.appId,sdkVersion:qe},o={method:"POST",headers:i,body:JSON.stringify(s)},l=await Ye(()=>fetch(r,o));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:ze(c.authToken)}}else throw await Ke("Create Installation",l)}function Qe(t){return new Promise(e=>{setTimeout(e,t)})}function dn(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}const hn=/^[cdef][\w-]{21}$/,ie="";function fn(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=pn(t);return hn.test(n)?n:ie}catch{return ie}}function pn(t){return dn(t).substr(0,22)}function U(t){return`${t.appName}!${t.appId}`}const Xe=new Map;function Ze(t,e){const n=U(t);et(n,e),gn(n,e)}function et(t,e){const n=Xe.get(t);if(n)for(const r of n)r(e)}function gn(t,e){const n=mn();n&&n.postMessage({key:t,fid:e}),bn()}let w=null;function mn(){return!w&&"BroadcastChannel"in self&&(w=new BroadcastChannel("[Firebase] FID Change"),w.onmessage=t=>{et(t.data.key,t.data.fid)}),w}function bn(){Xe.size===0&&w&&(w.close(),w=null)}const yn="firebase-installations-database",wn=1,v="firebase-installations-store";let Q=null;function ce(){return Q||(Q=wt(yn,wn,{upgrade:(t,e)=>{e===0&&t.createObjectStore(v)}})),Q}async function j(t,e){const n=U(t),i=(await ce()).transaction(v,"readwrite"),a=i.objectStore(v),s=await a.get(n);return await a.put(e,n),await i.done,(!s||s.fid!==e.fid)&&Ze(t,e.fid),e}async function tt(t){const e=U(t),r=(await ce()).transaction(v,"readwrite");await r.objectStore(v).delete(e),await r.done}async function W(t,e){const n=U(t),i=(await ce()).transaction(v,"readwrite"),a=i.objectStore(v),s=await a.get(n),o=e(s);return o===void 0?await a.delete(n):await a.put(o,n),await i.done,o&&(!s||s.fid!==o.fid)&&Ze(t,o.fid),o}async function le(t){let e;const n=await W(t.appConfig,r=>{const i=In(r),a=Cn(t,i);return e=a.registrationPromise,a.installationEntry});return n.fid===ie?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function In(t){const e=t||{fid:fn(),registrationStatus:0};return nt(e)}function Cn(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(C.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=vn(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:An(t)}:{installationEntry:e}}async function vn(t,e){try{const n=await un(t,e);return j(t.appConfig,n)}catch(n){throw We(n)&&n.customData.serverCode===409?await tt(t.appConfig):await j(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function An(t){let e=await Re(t.appConfig);for(;e.registrationStatus===1;)await Qe(100),e=await Re(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await le(t);return r||n}return e}function Re(t){return W(t,e=>{if(!e)throw C.create("installation-not-found");return nt(e)})}function nt(t){return Tn(t)?{fid:t.fid,registrationStatus:0}:t}function Tn(t){return t.registrationStatus===1&&t.registrationTime+Ve<Date.now()}async function Sn({appConfig:t,heartbeatServiceProvider:e},n){const r=kn(t,n),i=on(t,n),a=e.getImmediate({optional:!0});if(a){const c=await a.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const s={installation:{sdkVersion:qe,appId:t.appId}},o={method:"POST",headers:i,body:JSON.stringify(s)},l=await Ye(()=>fetch(r,o));if(l.ok){const c=await l.json();return ze(c)}else throw await Ke("Generate Auth Token",l)}function kn(t,{fid:e}){return`${Ge(t)}/${e}/authTokens:generate`}async function ue(t,e=!1){let n;const r=await W(t.appConfig,a=>{if(!rt(a))throw C.create("not-registered");const s=a.authToken;if(!e&&Rn(s))return a;if(s.requestStatus===1)return n=En(t,e),a;{if(!navigator.onLine)throw C.create("app-offline");const o=Dn(a);return n=_n(t,o),o}});return n?await n:r.authToken}async function En(t,e){let n=await Pe(t.appConfig);for(;n.authToken.requestStatus===1;)await Qe(100),n=await Pe(t.appConfig);const r=n.authToken;return r.requestStatus===0?ue(t,e):r}function Pe(t){return W(t,e=>{if(!rt(e))throw C.create("not-registered");const n=e.authToken;return On(n)?{...e,authToken:{requestStatus:0}}:e})}async function _n(t,e){try{const n=await Sn(t,e),r={...e,authToken:n};return await j(t.appConfig,r),n}catch(n){if(We(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await tt(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await j(t.appConfig,r)}throw n}}function rt(t){return t!==void 0&&t.registrationStatus===2}function Rn(t){return t.requestStatus===2&&!Pn(t)}function Pn(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+nn}function Dn(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function On(t){return t.requestStatus===1&&t.requestTime+Ve<Date.now()}async function xn(t){const e=t,{installationEntry:n,registrationPromise:r}=await le(e);return r?r.catch(console.error):ue(e).catch(console.error),n.fid}async function Nn(t,e=!1){const n=t;return await Mn(n),(await ue(n,e)).token}async function Mn(t){const{registrationPromise:e}=await le(t);e&&await e}function Hn(t){if(!t||!t.options)throw X("App Configuration");if(!t.name)throw X("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw X(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function X(t){return C.create("missing-app-config-values",{valueName:t})}const it="installations",$n="installations-internal",Bn=t=>{const e=t.getProvider("app").getImmediate(),n=Hn(e),r=V(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Ln=t=>{const e=t.getProvider("app").getImmediate(),n=V(e,it).getImmediate();return{getId:()=>xn(n),getToken:i=>Nn(n,i)}};function jn(){H(new $(it,Bn,"PUBLIC")),H(new $($n,Ln,"PRIVATE"))}jn();M(Fe,oe);M(Fe,oe,"esm2020");const F="analytics",Fn="firebase_id",Vn="origin",qn=60*1e3,Un="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",de="https://www.googletagmanager.com/gtag/js";const m=new It("@firebase/analytics");const Wn={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},b=new $e("analytics","Analytics",Wn);function Gn(t){if(!t.startsWith(de)){const e=b.create("invalid-gtag-resource",{gtagURL:t});return m.warn(e.message),""}return t}function at(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function zn(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Kn(t,e){const n=zn("firebase-js-sdk-policy",{createScriptURL:Gn}),r=document.createElement("script"),i=`${de}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Jn(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Yn(t,e,n,r,i,a){const s=r[i];try{if(s)await e[s];else{const l=(await at(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(o){m.error(o)}t("config",i,a)}async function Qn(t,e,n,r,i){try{let a=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const o=await at(n);for(const l of s){const c=o.find(p=>p.measurementId===l),f=c&&e[c.appId];if(f)a.push(f);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",r,i||{})}catch(a){m.error(a)}}function Xn(t,e,n,r){async function i(a,...s){try{if(a==="event"){const[o,l]=s;await Qn(t,e,n,o,l)}else if(a==="config"){const[o,l]=s;await Yn(t,e,n,r,o,l)}else if(a==="consent"){const[o,l]=s;t("consent",o,l)}else if(a==="get"){const[o,l,c]=s;t("get",o,l,c)}else if(a==="set"){const[o]=s;t("set",o)}else t(a,...s)}catch(o){m.error(o)}}return i}function Zn(t,e,n,r,i){let a=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=Xn(a,t,e,n),{gtagCore:a,wrappedGtag:window[i]}}function er(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(de)&&n.src.includes(t))return n;return null}const tr=30,nr=1e3;class rr{constructor(e={},n=nr){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const st=new rr;function ir(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function ar(t){const{appId:e,apiKey:n}=t,r={method:"GET",headers:ir(n)},i=Un.replace("{app-id}",e),a=await fetch(i,r);if(a.status!==200&&a.status!==304){let s="";try{const o=await a.json();o.error?.message&&(s=o.error.message)}catch{}throw b.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s})}return a.json()}async function sr(t,e=st,n){const{appId:r,apiKey:i,measurementId:a}=t.options;if(!r)throw b.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw b.create("no-api-key")}const s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new lr;return setTimeout(async()=>{o.abort()},qn),ot({appId:r,apiKey:i,measurementId:a},s,o,e)}async function ot(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=st){const{appId:a,measurementId:s}=t;try{await or(r,e)}catch(o){if(s)return m.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${o?.message}]`),{appId:a,measurementId:s};throw o}try{const o=await ar(t);return i.deleteThrottleMetadata(a),o}catch(o){const l=o;if(!cr(l)){if(i.deleteThrottleMetadata(a),s)return m.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:a,measurementId:s};throw o}const c=Number(l?.customData?.httpStatus)===503?pe(n,i.intervalMillis,tr):pe(n,i.intervalMillis),f={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return i.setThrottleMetadata(a,f),m.debug(`Calling attemptFetch again in ${c} millis`),ot(t,f,r,i)}}function or(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(a),r(b.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function cr(t){if(!(t instanceof Be)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class lr{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function ur(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const a=await e,s={...r,send_to:a};t("event",n,s)}}async function dr(t,e,n,r){if(r&&r.global){const i={};for(const a of Object.keys(n))i[`user_properties.${a}`]=n[a];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}async function hr(){if(vt())try{await At()}catch(t){return m.warn(b.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return m.warn(b.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function fr(t,e,n,r,i,a,s){const o=sr(t);o.then(d=>{n[d.measurementId]=d.appId,t.options.measurementId&&d.measurementId!==t.options.measurementId&&m.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${d.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(d=>m.error(d)),e.push(o);const l=hr().then(d=>{if(d)return r.getId()}),[c,f]=await Promise.all([o,l]);er(a)||Kn(a,c.measurementId),i("js",new Date);const p=s?.config??{};return p[Vn]="firebase",p.update=!0,f!=null&&(p[Fn]=f),i("config",c.measurementId,p),c.measurementId}class pr{constructor(e){this.app=e}_delete(){return delete T[this.app.options.appId],Promise.resolve()}}let T={},De=[];const Oe={};let Z="dataLayer",gr="gtag",xe,he,Ne=!1;function mr(){const t=[];if(Ct()&&t.push("This is a browser extension environment."),kt()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=b.create("invalid-analytics-context",{errorInfo:e});m.warn(n.message)}}function br(t,e,n){mr();const r=t.options.appId;if(!r)throw b.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)m.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw b.create("no-api-key");if(T[r]!=null)throw b.create("already-exists",{id:r});if(!Ne){Jn(Z);const{wrappedGtag:a,gtagCore:s}=Zn(T,De,Oe,Z,gr);he=a,xe=s,Ne=!0}return T[r]=fr(t,De,Oe,e,xe,Z,n),new pr(t)}function yr(t=Tt()){t=ae(t);const e=V(t,F);return e.isInitialized()?e.getImmediate():wr(t)}function wr(t,e={}){const n=V(t,F);if(n.isInitialized()){const i=n.getImmediate();if(St(e,n.getOptions()))return i;throw b.create("already-initialized")}return n.initialize({options:e})}function Ir(t,e,n){t=ae(t),dr(he,T[t.app.options.appId],e,n).catch(r=>m.error(r))}function Cr(t,e,n,r){t=ae(t),ur(he,T[t.app.options.appId],e,n,r).catch(i=>m.error(i))}const Me="@firebase/analytics",He="0.10.19";function vr(){H(new $(F,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return br(r,i,n)},"PUBLIC")),H(new $("analytics-internal",t,"PRIVATE")),M(Me,He),M(Me,He,"esm2020");function t(e){try{const n=e.getProvider(F).getImmediate();return{logEvent:(r,i,a)=>Cr(n,r,i,a),setUserProperties:(r,i)=>Ir(n,r,i)}}catch(n){throw b.create("interop-component-reg-failed",{reason:n})}}}vr();const Dr=.6,Or=1.1,Ar={apiKey:"AIzaSyA07rmFYxIPgf5ZicE6tLnT0g7otsntVAI",authDomain:"blackjack-19729.firebaseapp.com",projectId:"blackjack-19729",storageBucket:"blackjack-19729.firebasestorage.app",messagingSenderId:"695301861998",appId:"1:695301861998:web:158fd8368aaac069c52c7f",measurementId:"G-BNTT6670HE"},xr="User_Email",Tr=Et(Ar);yr(Tr);const Nr={url:"https://www.github.io/bjk/finishSignUp",handleCodeInApp:!0};en();const fe=bt(_t);fe.use(yt());fe.use(Dt);fe.mount("#app");export{Or as C,K as H,xr as L,Y as N,g as S,Nr as a,Dr as b,A as c,xt as d,O as e,Mt as f,N as g,x as h,Pr as i,G as j,z as k,Tr as l,h as m,_r as n,Rr as o,Er as u};
